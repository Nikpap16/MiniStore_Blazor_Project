@inherits LayoutComponentBase

<div class="d-flex">
    <!-- Sidebar -->
    <nav class="sidebar bg-dark text-white p-3 vh-100">
        <h4 class="text-center mb-4">MiniStore</h4>
        <ul class="nav flex-column">
            <li class="nav-item mb-2">
                <NavLink class="nav-link text-white" href="/" Match="NavLinkMatch.All">Home</NavLink>
            </li>
            <li class="nav-item mb-2">
                <NavLink class="nav-link text-white" href="/cart">
                    Cart
                    @if (CartService.Count > 0)
                    {
                        <span class="badge bg-danger ms-1">@CartService.Count</span>
                    }
                </NavLink>
            </li>
            <li class="nav-item mb-2">
                <NavLink class="nav-link text-white" href="/admin-login">Admin Login</NavLink>
            </li>
        </ul>
    </nav>

    <!-- Main content -->
    <main class="flex-grow-1 p-4">
        <article class="content">
            @Body
        </article>
    </main>
</div>

<!-- Blazor error UI -->
<div id="blazor-error-ui" data-nosnippet>
    An unhandled error has occurred.
    <a href="." class="reload">Reload</a>
    <span class="dismiss">🗙</span>
</div>

@code {
    [Inject] MiniStore.Services.CartService CartService { get; set; } = null!;

    protected override void OnInitialized()
    {
        CartService.OnChange += StateHasChanged;
    }

    public void Dispose()
    {
        CartService.OnChange -= StateHasChanged;
    }
}

<style>
    /* Background & fonts */
    body {
        background-color: #121212;
        color: #fff;
        font-family: 'Segoe UI', sans-serif;
    }

    h2 {
        color: #e74c3c;
        margin-bottom: 1rem;
    }

    /* Table styling */
    .table {
        border-collapse: separate;
        border-spacing: 0 0.5rem;
    }

        .table tr {
            background-color: #1a1a1a;
            color: #fff;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.4);
        }

        .table th, .table td {
            border: none !important;
            padding: 0.75rem 1rem;
            text-align: center;
        }

        .table tr:hover {
            transform: scale(1.02);
            transition: 0.2s;
            cursor: pointer;
        }

    /* Buttons */
    .btn-success {
        background-color: #e74c3c;
        border: none;
        padding: 0.25rem 0.5rem;
    }

    .btn-warning {
        background-color: #f39c12;
        border: none;
        padding: 0.25rem 0.5rem;
    }

    .btn-danger {
        background-color: #c0392b;
        border: none;
        padding: 0.25rem 0.5rem;
    }

    .btn-secondary, .btn-primary {
        border-radius: 5px;
        padding: 0.5rem 1rem;
    }

    .btn-success:hover {
        background-color: #ff6666;
    }

    .btn-warning:hover {
        background-color: #f1c40f;
    }

    .btn-danger:hover {
        background-color: #e74c3c;
    }


/* Sidebar */
.sidebar {
    background-color: #1a1a1a; /* σκούρο μαύρο */
    color: #fff;
    min-width: 220px;
    padding: 1rem;
    height: 100vh;
}

.sidebar h4 {
    color: #e74c3c; /* κόκκινο */
    text-align: center;
    margin-bottom: 1.5rem;
}

.sidebar .nav-link {
    color: #fff;
    padding: 0.5rem 1rem;
    border-radius: 5px;
    margin-bottom: 0.5rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.sidebar .nav-link:hover {
    background-color: #e74c3c;
    color: #fff;
    transition: 0.2s;
}

.sidebar .badge {
    background-color: #f39c12; /* πορτοκαλί για badge */
    color: #fff;
    font-weight: bold;
    padding: 0.2rem 0.5rem;
    border-radius: 12px;
}

    .popup-content {
        background: white;
        padding: 1.5rem;
        border-radius: 10px;
        max-width: 450px;
        width: 90%;
        box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        /* Η ΔΙΟΡΘΩΣΗ: */
        color: #333 !important;
    }

        /* Εξασφαλίζουμε ότι και οι τίτλοι μέσα στο popup είναι σκούροι */
        .popup-content h4, .popup-content p, .popup-content span {
            color: #000 !important;
        }

    </style>